(this["webpackJsonpto-do-app"]=this["webpackJsonpto-do-app"]||[]).push([[0],[,,,,,function(e,t,a){e.exports={TaskElement:"TaskElement_TaskElement__13UVG",Title:"TaskElement_Title__1y87S",Status:"TaskElement_Status__3cX6x",Checkbox:"TaskElement_Checkbox__208J8",Done:"TaskElement_Done__2tKuA"}},,function(e,t,a){e.exports={Button:"Button_Button__3h9Fb",Danger:"Button_Danger__1lxLJ"}},,,,,,,,,,function(e,t,a){e.exports={TaskDetails:"TaskDetails_TaskDetails__3kWAK"}},function(e,t,a){e.exports={Header:"TaskHeader_Header__39s6z"}},function(e,t,a){e.exports={TaskItems:"TaskList_TaskItems__1PHkn"}},function(e,t,a){e.exports={Tasks:"TaskController_Tasks__WsmfQ"}},function(e,t,a){e.exports={ProjectForm:"ProjectForm_ProjectForm__2Vzki"}},function(e,t,a){e.exports={Projects:"Projects_Projects__2M78j"}},function(e,t,a){e.exports={ProjectElement:"ProjectElement_ProjectElement__3ufHR"}},function(e,t,a){e.exports={Error:"Error_Error__1wjn7"}},,function(e,t,a){e.exports=a(36)},,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),l=a.n(o),s=a(25),c=a(10),i=a(1),d=a(2),h=a(4),u=a(3),p=a(17),m=a.n(p),k=a(7),f=a.n(k),v=function(e){var t=f.a.Button,a="submit";return e.type&&(t=[f.a.Button,f.a[e.type]].join(" "),a="button"),r.a.createElement("button",{type:a,id:"button",onClick:e.clicked,className:t},e.children)},j=function(e){var t=null;return e<10&&e>-1&&(t="0"+e),t||e},E=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(i.a)(this,a),(n=t.call(this,e)).handleChangeName=function(e){n.setState({name:e.target.value})},n.handleChangeDate=function(e){n.setState({date:e.target.value})},n.handleChangePriority=function(e){n.setState({priority:e.target.value})},n.handleSubmit=function(e){(e.preventDefault(),""!==n.state.name)?(n.props.whichTask?n.props.handleUpdate(n.state,n.props.id):n.props.handleUpdate(n.state),n.props.handleCancel()):alert("Write a name!")},n.handleCancel=function(e){e.preventDefault(),n.props.handleCancel()};var r=new Date,o=j(r.getDate()),l=j(r.getMonth()+1),s=r.getFullYear();return n.state={name:"",date:"".concat(s,"-").concat(l,"-").concat(o),priority:"low"},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.whichTask;e&&this.setState({name:e.name,date:e.date,priority:e.priority})}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit,className:m.a.TaskDetails},r.a.createElement("label",null,"Name"),this.props.whichTask?r.a.createElement("input",{value:this.state.name,onChange:this.handleChangeName}):r.a.createElement("input",{placeholder:this.state.name,onChange:this.handleChangeName}),r.a.createElement("label",null,"Due date"),r.a.createElement("input",{type:"date",onChange:this.handleChangeDate,value:this.state.date}),r.a.createElement("label",null,"Priority "),r.a.createElement("select",{value:this.state.priority,onChange:this.handleChangePriority},r.a.createElement("option",{value:"low"},"low"),r.a.createElement("option",{value:"medium"},"medium"),r.a.createElement("option",{value:"high"},"high")),r.a.createElement("div",null,r.a.createElement(v,{type:"Danger",clicked:this.handleCancel},"cancel"),r.a.createElement(v,{clicked:this.handleSubmit},this.props.whichTask?"update":"add")))}}]),a}(r.a.Component),b=a(18),g=a.n(b),y=function(e){return r.a.createElement("header",{className:g.a.Header},r.a.createElement("h2",null,e.projectName),r.a.createElement("h2",null,"Tasks"),r.a.createElement("button",{onClick:e.handleNewTask}),r.a.createElement("button",{onClick:e.handleBack}))},T=a(5),P=a.n(T),C=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props.task,a=P.a.TaskElement;return t.done&&(a=[P.a.TaskElement,P.a.Done].join(" ")),r.a.createElement("li",{className:a,"data-key":t.id},r.a.createElement("div",{className:P.a.Title},r.a.createElement("p",null,t.name)),r.a.createElement("div",{className:P.a.Status},r.a.createElement("label",null,"Status: "),t.done?r.a.createElement("p",{onClick:function(){return e.props.handleCheck(t.id)}},"DONE"):r.a.createElement("p",{onClick:function(){return e.props.handleCheck(t.id)}},"TO DO")),r.a.createElement("div",null,r.a.createElement("label",null,"Date: "),r.a.createElement("p",null,t.date?t.date:null)),r.a.createElement("div",null,r.a.createElement("label",null,"Priority: "),r.a.createElement("p",null,t.priority)),r.a.createElement("div",null,r.a.createElement(v,{clicked:function(){return e.props.handleDetails(t,t.id)},type:null},"edit"),r.a.createElement(v,{clicked:function(){return e.props.handleRemove(t.id)},type:"Danger"},"delete")))}}]),a}(r.a.Component),w=a(19),_=a.n(w),S=function(e){var t=e.tasks;if(t){var a=t.sort((function(e,t){return e.name<t.name?1:-1}));t=a.sort((function(e){return e.done?1:-1}))}return r.a.createElement("ul",{className:_.a.TaskItems},t?t.map((function(t){return r.a.createElement(C,{key:t.id,task:t,handleRemove:e.handleRemove,handleCheck:e.handleCheck,handleDetails:e.handleDetails})})):r.a.createElement("h2",null,"No tasks to show."))},N=a(20),D=a.n(N),O=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleAdd=function(e){n.props.handleAdd(e)},n.handleUpdate=function(e,t){n.props.handleUpdate(e,t)},n.handleRemove=function(e){n.props.handleRemove(e)},n.handleCheck=function(e){n.props.handleCheck(e)},n.handleBack=function(){n.props.handleBack()},n.handleDetails=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;e&&(e.id=t),n.setState({showList:!n.state.showList,task:e})},n.handleNewTask=function(){n.setState({showList:!n.state.showList,task:null})},n.state={showList:!0,task:null},n}return Object(d.a)(a,[{key:"render",value:function(){var e=null;return e=this.state.showList?r.a.createElement(S,{tasks:this.props.tasks,handleRemove:this.handleRemove,handleDetails:this.handleDetails,handleCheck:this.handleCheck}):r.a.createElement(E,{whichTask:this.state.task,id:this.state.task?this.state.task.id:null,handleUpdate:this.state.task?this.handleUpdate:this.handleAdd,handleDetails:this.handleDetails,handleCancel:this.handleDetails}),r.a.createElement("div",{className:D.a.Tasks},r.a.createElement(y,{projectName:this.props.projectName,handleNewTask:this.handleNewTask,handleBack:this.handleBack}),e)}}]),a}(r.a.Component),A=function(e){return e.children},R=function(){return r.a.createElement("h1",null,"To do App")},B=a(21),x=a.n(B),I=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({value:e.target.value})},n.handleButton=function(e){e.preventDefault(),n.props.handleAdd(n.state.value)},n.state={value:"Nome do novo projeto..."},n}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{className:x.a.ProjectForm,onSubmit:this.handleButton},r.a.createElement("input",{placeholder:this.state.value,onChange:this.handleChange}),r.a.createElement("div",null,r.a.createElement(v,null,"add")))}}]),a}(r.a.Component),U=a(22),L=a.n(U),H=a(23),F=a.n(H),M=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleRemove=function(t){e.props.handleRemove(t.target.parentElement.getAttribute("data-key"))},e.handleNav=function(t){var a=t.target;"button"!==a.id&&(a.getAttribute("data-key")||a.parentElement.getAttribute("data-key"))&&e.props.handleNav(e.props.project.id)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props.project.id;return r.a.createElement("li",{"data-key":t,className:F.a.ProjectElement,onClick:this.handleNav},r.a.createElement("p",null,this.props.project.name),r.a.createElement("div",null,r.a.createElement(v,{type:"Danger",clicked:function(){return e.props.handleRemove(t)}},"delete")))}}]),a}(r.a.Component),J=function(e){return r.a.createElement("ol",null,e.projects.map((function(t){return r.a.createElement(M,{project:t,handleRemove:e.handleRemove,handleNav:e.handleNav,key:t.id})})))},z=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleAdd=function(t){e.props.handleAdd(t)},e.handleRemove=function(t){e.props.handleRemove(t)},e.handleNav=function(t){e.props.handleNav(t)},e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:L.a.Projects},r.a.createElement("h2",null,"Projects"),r.a.createElement(I,{handleAdd:this.handleAdd}),r.a.createElement(J,{projects:this.props.projects,handleRemove:this.handleRemove,handleNav:this.handleNav}))}}]),a}(r.a.Component),W=a(9),K=a.n(W);a(31);K.a.initializeApp({apiKey:"AIzaSyCqA-Q7-ugQSpx03MbAWyul7gMu2JnHTbI",authDomain:"to-do-react-10320.firebaseapp.com",databaseURL:"https://to-do-react-10320.firebaseio.com",projectId:"to-do-react-10320",storageBucket:"to-do-react-10320.appspot.com",messagingSenderId:"877841554206",appId:"1:877841554206:web:29d753367ea5633ad3c70f"});var Q=function(){var e=K.a.firestore().collection("projects");return{getProjects:function(){return new Promise((function(t,a){var n=[],r=!1;e.get().then((function(o){o.docs.forEach((function(t){var a=t.id,o=[],l={id:a,name:t.data().name};e.doc(a).collection("tasks").get().then((function(e){e.docs.forEach((function(e){o.push({id:e.id,name:e.data().name,date:e.data().date,priority:e.data().priority,done:e.data().done})}))})),r=!0,l.tasks=o,n.push(l)})),r?t(n):a("Ocorreu algum erro!")}))}))},saveProjects:function(t){return new Promise((function(a){e.add({name:t.name,tasks:[]}).then((function(e){a(e.id)}))}))},saveTasks:function(t,a){var n=t.id;return new Promise((function(t){e.doc(n).collection("tasks").add({name:a.name,date:a.date,priority:a.priority,done:a.done}).then((function(e){t({taskId:e.id,projectId:n})}))}))},deleteTask:function(t,a){e.doc(t).collection("tasks").doc(a).delete()},deleteProject:function(t){e.doc(t).delete()},updateTask:function(t,a,n){e.doc(t).collection("tasks").doc(a).update({name:n.name,date:n.date,priority:n.priority,done:n.done})}}}(),V=(a(34),a(35),a(24)),q=a.n(V),G=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleAddProject=function(e){Q.saveProjects({name:e}).then((function(t){var a=n.state.projects;a.push({name:e,id:t}),n.setState({projects:a})}))},n.handleRemoveProject=function(e){var t=n.state.projects;t=t.filter((function(t){return String(t.id)!==String(e)})),n.setState({projects:t}),Q.deleteProject(e)},n.handleNavProject=function(e){var t=n.state.projects.find((function(t){return String(t.id)===String(e)}));n.setState({shownProject:t})},n.handleAddTask=function(e){var t=Object(c.a)({},n.state.shownProject),a=t.tasks||[];Q.saveTasks(t,{name:e.name,date:e.date,priority:e.priority,done:!1}).then((function(r){a.push({name:e.name,date:e.date,priority:e.priority,id:r.taskId,done:!1}),t.tasks=a,t.id=r.projectId,n.setState({shownProject:t})}))},n.handleUpdateTask=function(e,t){var a=Object(c.a)({},n.state.shownProject),r=Object(s.a)(a.tasks),o=r.findIndex((function(e){return String(e.id)===String(t)})),l=r[o];l.name=e.name,l.date=e.date,l.priority=e.priority,r.splice(o,1,l),a.tasks=r,n.setState({shownProject:a}),Q.updateTask(a.id,t,l)},n.handleRemoveTask=function(e){var t=n.state.shownProject,a=n.state.shownProject.tasks;a=a.filter((function(t){return String(t.id)!==String(e)})),t.tasks=a,n.setState({shownProject:t}),Q.deleteTask(t.id,e)},n.handleCheckTask=function(e){var t=n.state.shownProject,a=n.state.shownProject.tasks,r=a.find((function(t){return String(t.id)===String(e)}));r.done=!r.done,t.tasks=a,n.setState({shownProject:t}),Q.updateTask(t.id,e,r)},n.handleBack=function(){n.setState({shownProject:null})},n.state={projects:[],shownProject:null,firebaseError:!1},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;Q.getProjects().then((function(t){e.setState({projects:t}),e.setState({firebaseError:!1})})).catch((function(t){e.setState({firebaseError:!0})}))}},{key:"render",value:function(){var e=this.state.shownProject?r.a.createElement(O,{projectName:this.state.shownProject.name,tasks:this.state.shownProject.tasks,handleAdd:this.handleAddTask,handleUpdate:this.handleUpdateTask,handleRemove:this.handleRemoveTask,handleCheck:this.handleCheckTask,handleBack:this.handleBack}):r.a.createElement(z,{projects:this.state.projects,handleAdd:this.handleAddProject,handleRemove:this.handleRemoveProject,handleNav:this.handleNavProject});return r.a.createElement(A,null,r.a.createElement(R,null),this.state.firebaseError?r.a.createElement("div",{className:q.a.Error},r.a.createElement("p",null,"Problem reaching firebase."),r.a.createElement("p",null,"Reload the page and verify your conection.")):e)}}]),a}(r.a.Component);l.a.render(r.a.createElement(G,null),document.getElementById("root"))}],[[26,1,2]]]);
//# sourceMappingURL=main.8211fec9.chunk.js.map